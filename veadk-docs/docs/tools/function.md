---
title: 自定义工具
---

本文档介绍如何在智能体系统中创建与使用**自定义工具（Custom Tools）**，以扩展内置能力。  
自定义工具可以满足特定业务逻辑需求，包括普通函数调用、带上下文的函数、以及长时间运行的任务等。  
通过组合自定义工具，开发者能够构建更复杂、更贴合业务场景的智能体应用。

---

## 普通入参函数（Standard Parameter Function）

普通入参函数是最基础的自定义工具形式，通过传入参数完成特定计算或逻辑处理。

### 准备工作
1. 定义工具函数，声明输入参数及返回类型；
2. 将工具注册到 Agent 的工具列表中。

```

# 占位: 普通函数自定义工具示例（代码片段）

```

### 示例
```

# 占位: 调用普通自定义函数的示例

```

### 说明 / 结果展示
工具执行后返回直接结果，例如：
- 数值计算结果；
- 文本处理结果；
- 结构化 JSON 数据。

```

# 占位: 执行结果示例

```

---

## 携带 ToolContext 函数（ToolContext-aware Function）

ToolContext 函数能够访问智能体运行时上下文信息（如会话 ID、历史记录、环境变量等），从而实现更智能的决策。

### 准备工作
1. 定义函数时接受 `ToolContext` 作为参数；
2. 注册函数时确保 Agent 运行时能够传递上下文对象。

```

# 占位: ToolContext 自定义函数示例

```

### 示例
```

# 占位: 调用 ToolContext 函数示例

```

### 说明 / 结果展示
工具可以基于上下文返回：
- 用户特定的定制化结果；
- 动态生成的任务或数据；
- 结合上下文进行多轮推理的输出。

```

# 占位: 执行结果示例

```

---

## 长时运行任务（Long-running Task）

长时运行任务工具适用于需要耗时处理或异步执行的操作，例如大规模计算、数据分析或批量处理任务。

### 准备工作
1. 定义任务函数，支持异步或后台执行；
2. 注册工具时指定任务类型及超时策略。

```

# 占位: 长时运行任务工具示例

```

### 示例
```

# 占位: 调用长时任务工具的示例（异步执行）

```

### 说明 / 结果展示
执行完成后可获取：
- 任务唯一 ID；
- 执行状态（进行中、完成、失败）；
- 任务结果（文件、数据或报告）。

```

# 占位: 执行结果示例

```

---

## 使用自定义工具构建长时复杂应用

通过组合自定义工具，智能体能够完成多步骤、长时运行的复杂业务逻辑。  
以下为可供参考的新手友好场景：

| 应用场景 | 工具组合 | 功能说明 |
|-----------|-----------|-----------|
| **自动化数据分析** | 长时任务工具 + 普通函数工具 + ToolContext 函数 | 数据采集 → 批量计算 → 上下文反馈 → 结果汇总。 |
| **报告生成与分发** | 普通函数工具 + ToolContext + 长时任务工具 | 文本与图表生成 → 统计分析 → 异步推送至用户或企业平台。 |
| **多轮调研助手** | ToolContext 函数 + 长时任务工具 | 保存用户交互上下文 → 后台处理问卷或信息收集 → 返回汇总报告。 |

```

# 占位: 长时复杂应用流程示意图

```

建议在实际项目中，结合可观测与 Runner 机制，管理工具执行状态，并确保长时任务在异常或超时情况下能够被正确处理与追踪。
