---
title: 短期记忆
---

本文档介绍 VeADK 系统中的**短期记忆（Short-term Memory）**机制及其应用。短期记忆用于保存会话级或短时间跨度的上下文信息，以提升多轮交互的一致性和智能体响应的连贯性。

## 初始化

VeADK 中，您可以使用如下短期记忆后端服务来初始化您的短期记忆：

| 类别 | 说明 |
| :- | :- |
| `local` | 内存短期记忆，程序结束后即清空 |
| `mysql` | 使用 MySQL 数据库存储短期记忆，可实现持久化 |
| `sqlite` | 使用本地 SQLite 数据库存储短期记忆，可实现持久化 |
| `postgresql` | 使用 PostgreSQL 数据库存储短期记忆，可实现持久化 |
| `database` | 已废弃，设置后将会自动转为 `sqlite` |

### 最简初始化

下面展示了一个使用 `local` 模式的短期记忆样例：

```python
# demo
```

### 通过 URL 初始化

您可以直接通过数据库连接URL `db_url` 来初始化一个具备持久化能力的短期记忆：

```python
# db_url
```

### 本地 SQLite 初始化

您可以通过指定后端为 `sqlite`，将用户的短期记忆通过一个 SQLite 数据库文件持久化在本地。数据库文件的保存地址可以通过 `local_database_path` 参数指定。例如：

```python
# db_url
```

执行结果如下：

在日志中，您可以看到数据库文件的保存地址与代码示例中给出的一致。

## 创建会话

您可以通过两种方式来创建会话：

**短期记忆接口**

```python

```

**Google ADK Session Service**

```python

```

## 列出与查询会话

```python

```

## 短期记忆加载 Callback

短期记忆通常与回调机制（Callback）结合使用，以在智能体运行时动态读取和更新上下文。

### 准备工作
- 定义 Callback 函数或对象；
- 在 Agent 或 Runner 初始化时注册该 Callback。

```

# 占位: 短期记忆 Callback 定义示例

```

### 示例
```

# 占位: 使用 Callback 在 Agent 中加载短期记忆的示例

```

### 说明 / 结果展示
Callback 在每次用户交互前自动提供：
- 上下文信息（对话历史、用户意图等）；
- 上一次工具调用结果（如函数输出或外部数据）；
- 可选的状态标记或控制变量。

```

# 占位: Callback 返回示例（JSON / 结构化数据）

```
