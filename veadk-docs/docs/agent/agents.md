---
title: 多智能体交互
---

本文档介绍如何在同一系统中定义、协作和运行多个智能体（Agent）。多 Agent 系统的设计核心在于**角色分工**与**通信机制**。
通过合理的协作策略，可将复杂任务拆解为可控的子任务，从而提高整体稳定性与可扩展性。

## 多 Agents 系统构建

多智能体系统通常由若干具备独立职责的 Agent 组成。主 Agent 的常见类型包括：

- **LLM Agent**（自主子 Agents 调用）：以语言模型为核心的智能体，负责自然语言推理与生成；
- **Workflow Agent**（硬编码子 Agents 调用）：以任务流程为核心的智能体，负责控制执行顺序与结果聚合。

以下内容分别说明两种主要构建方式。

### LLM Agent

**定义**：LLM Agent 是直接基于大语言模型（LLM）的智能体，用于处理理解、推理与生成类任务。其将根据实际场景，**自动**调用不同子 Agent 来完成任务。

**样例**：下面给出一个生活建议 Agent 来演示说明 LLM Agent 的主要交互方法。其中，主 Agent 负责接收用户输入，子 Agents 分别负责获取天气及给出穿衣建议。

```python [agent.py]
# 占位：LLM Agent 定义示例
```

运行结果如下图所示。可以看到，主 Agent 根据用户提示场景，首先调用了天气 Agent 来获取天气情况（其调用了 `get/-city_weather` 来获取实际温度），随后调用了穿衣建议 Agent 来给出穿衣建议。

!!! tip "多 Agent 交互不准确的一些解决方案"
    - 尝试更换其它模型（例如思考模型等具备更好思考和理解能力的模型）
    - 尝试使用 Agent-as-a-Tool 模式，详见[这里]()

### Workflow Agent

**定义**：Workflow Agent 是负责调度、调用与结果整合的控制型智能体。它自身不具备语言模型能力，而是通过用户硬编码类别，调用子 LLM Agents 来完成整体任务。在 VeADK 中，工作流型 Agent 主要分为三类：

- 顺序型 Agent：
- 循环型 Agent：
- 并行型 Agent：

**样例**：下面给出一个文案生成 Agent 来演示顺序型 Agent 的执行流程。我们实现 3 个 Agents 来执行“文案生成—审查”工作流：

- 主 Agent：接收用户输入，按顺序精确调用子 Agents
- 文案生成 Agent：能够按照用户要求，生成文案
- 审查 Agent：校对文案中的语法、错别字等不规范内容

```python [agent.py]
# 占位：Workflow Agent 定义示例
```

运行结果如下图所示。可以看到，主 Agent 不具备语言理解能力，而是按照顺序精确地首先调用文案生成 Agent 来生成文案，随后调用审查 Agent 来给出校对情况。

## 多 Agents 应用场景

我们为您提供了一些可能使用到多 Agents 交互的应用场景：

| 场景名称        | 说明                                        | 典型 Agents 组合                             |
| ----------- | ----------------------------------------- | ---------------------------------------- |
| **内容生成助手**  | 用户输入主题，系统自动生成文章大纲、撰写正文、执行润色与摘要。           | Planner → Writer → Editor                |
| **研究资料助手**  | 根据研究问题自动检索资料、总结关键信息并生成引用格式。               | Researcher → Retriever → Summarizer      |
| **任务自动执行器** | 用户描述目标，系统拆分任务并调用不同工具或服务执行。                | Planner → Executor → Auditor             |
| **客服协同系统**  | 一个 Agent 负责理解用户问题，另一个 Agent 负责知识库检索并生成响应。 | FrontAgent → SupportAgent                |
| **会议纪要助手**  | 将会议录音转写、总结要点、生成行动项列表。                     | Transcriber → Summarizer → ActionPlanner |

多 Agent 系统通常遵循以下构建步骤：

1. **定义各个 Agent**：为每个角色创建独立配置文件或实例；
2. **定义通信机制**：确定数据在 Agents 之间的传递方式（直接调用、消息队列或共享内存）；
3. **设置协作逻辑**：使用 Workflow Agent 或控制脚本编排调用顺序；
4. **配置日志与观测**：确保每次调用链路可追踪。
